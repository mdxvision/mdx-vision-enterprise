# MDx Vision - EHR Proxy Configuration
# Copy this to .env and fill in your API keys

# ═══════════════════════════════════════════════════════════════════════════
# SECURITY & HTTPS (Issue #20 - HIPAA §164.312(e)(1))
# ═══════════════════════════════════════════════════════════════════════════

# Environment: "development" or "production"
# Production enables HSTS headers and HTTPS redirect
ENVIRONMENT=development

# SSL/TLS Certificate paths (required for production HTTPS)
# Get certificates from Let's Encrypt: certbot certonly --standalone -d your-domain.com
SSL_CERTFILE=/etc/letsencrypt/live/your-domain.com/fullchain.pem
SSL_KEYFILE=/etc/letsencrypt/live/your-domain.com/privkey.pem

# HTTPS port (default: 8443, use 443 if available)
HTTPS_PORT=8443

# Force HTTPS even in development (for local testing)
FORCE_HTTPS=false

# CORS Allowed Origins (Issue #15 - Security)
# Comma-separated list of allowed origins for CORS requests
# Leave empty for development defaults (localhost:3000, localhost:5173, etc.)
# Production example: ALLOWED_ORIGINS=https://dashboard.mdxvision.com,https://app.mdxvision.com
ALLOWED_ORIGINS=

# Rate Limiting (Issue #16 - OWASP API4:2023)
# Configure rate limits for different endpoint categories
# Format: "requests/period" (e.g., "100/minute", "10/second", "1000/hour")
RATE_LIMIT_DEFAULT=100/minute
RATE_LIMIT_AUTH=10/minute
RATE_LIMIT_FHIR=60/minute
RATE_LIMIT_AI=30/minute
RATE_LIMIT_WRITE=20/minute

# ═══════════════════════════════════════════════════════════════════════════
# TRANSCRIPTION PROVIDERS
# ═══════════════════════════════════════════════════════════════════════════

# Choose transcription provider: "assemblyai" or "deepgram"
TRANSCRIPTION_PROVIDER=assemblyai

# AssemblyAI API Key (get from https://www.assemblyai.com/dashboard)
ASSEMBLYAI_API_KEY=your_assemblyai_key_here

# Deepgram API Key (get from https://console.deepgram.com)
DEEPGRAM_API_KEY=your_deepgram_key_here

# Claude API Key for SOAP note generation (get from https://console.anthropic.com)
CLAUDE_API_KEY=your_claude_api_key_here

# Token Encryption Key (HIPAA compliance - generate a secure random string)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
EHR_TOKEN_ENCRYPTION_KEY=your_secure_encryption_key_here

# ═══════════════════════════════════════════════════════════════════════════
# EHR INTEGRATIONS
# Register your app with each EHR vendor to obtain credentials
# ═══════════════════════════════════════════════════════════════════════════

# Cerner/Oracle Health (register at https://fhir.cerner.com/)
CERNER_CLIENT_ID=your_cerner_client_id_here
CERNER_BASE_URL=https://fhir-open.cerner.com/r4/your-tenant-id

# Epic (register at https://fhir.epic.com/)
EPIC_CLIENT_ID=your_epic_client_id_here
EPIC_PROD_CLIENT_ID=your_epic_prod_client_id_here
EPIC_BASE_URL=https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4
EPIC_REDIRECT_URI=http://localhost:8002/auth/epic/callback

# Veradigm/Allscripts (register at https://developer.veradigm.com/)
VERADIGM_CLIENT_ID=your_veradigm_client_id_here
VERADIGM_CLIENT_SECRET=your_veradigm_client_secret_here
VERADIGM_BASE_URL=https://fhir.fhirpoint.open.allscripts.com/fhirroute/fhir/your-tenant
VERADIGM_AUTH_URL=https://fhir.fhirpoint.open.allscripts.com/fhirroute/authorizationV2/your-tenant/connect/authorize
VERADIGM_TOKEN_URL=https://fhir.fhirpoint.open.allscripts.com/fhirroute/authorizationV2/your-tenant/connect/token
VERADIGM_REDIRECT_URI=http://localhost:8002/auth/veradigm/callback

# MEDITECH (register at https://ehr.meditech.com/developers)
MEDITECH_CLIENT_ID=your_meditech_client_id_here
MEDITECH_CLIENT_SECRET=your_meditech_client_secret_here
MEDITECH_BASE_URL=https://greenfield.meditech.com/fhir/r4
MEDITECH_AUTH_URL=https://greenfield.meditech.com/oauth2/authorize
MEDITECH_TOKEN_URL=https://greenfield.meditech.com/oauth2/token
MEDITECH_REDIRECT_URI=http://localhost:8002/auth/meditech/callback

# eClinicalWorks (register at https://developer.eclinicalworks.com/)
ECLINICALWORKS_CLIENT_ID=your_ecw_client_id_here
ECLINICALWORKS_CLIENT_SECRET=your_ecw_client_secret_here
ECLINICALWORKS_BASE_URL=https://fhir.eclinicalworks.com/fhir/r4
ECLINICALWORKS_AUTH_URL=https://oauthserver.eclinicalworks.com/oauth/oauth2/authorize
ECLINICALWORKS_TOKEN_URL=https://oauthserver.eclinicalworks.com/oauth/oauth2/token
ECLINICALWORKS_REDIRECT_URI=http://localhost:8002/auth/ecw/callback

# athenahealth (register at https://developer.athenahealth.com/)
ATHENA_CLIENT_ID=your_athena_client_id_here
ATHENA_CLIENT_SECRET=your_athena_client_secret_here
ATHENA_BASE_URL=https://api.platform.athenahealth.com/fhir/r4
ATHENA_AUTH_URL=https://api.platform.athenahealth.com/oauth2/v1/authorize
ATHENA_TOKEN_URL=https://api.platform.athenahealth.com/oauth2/v1/token
ATHENA_REDIRECT_URI=http://localhost:8002/auth/athena/callback

# NextGen (register at https://developer.nextgen.com/)
NEXTGEN_CLIENT_ID=your_nextgen_client_id_here
NEXTGEN_CLIENT_SECRET=your_nextgen_client_secret_here
NEXTGEN_BASE_URL=https://fhir.nextgen.com/nge/prod/fhir-api-r4/fhir/r4
NEXTGEN_AUTH_URL=https://fhir.nextgen.com/nge/prod/patient-oauth/authorize
NEXTGEN_TOKEN_URL=https://fhir.nextgen.com/nge/prod/patient-oauth/token
NEXTGEN_REDIRECT_URI=http://localhost:8002/auth/nextgen/callback
